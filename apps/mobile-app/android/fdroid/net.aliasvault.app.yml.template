Categories:
  - Password & 2FA
  - Security
License: AGPL-3.0-or-later
AuthorName: Leendert de Borst
SourceCode: https://github.com/aliasvault/aliasvault
IssueTracker: https://github.com/aliasvault/aliasvault/issues
Changelog: https://github.com/aliasvault/aliasvault/releases

AutoName: AliasVault

RepoType: git
Repo: https://github.com/aliasvault/aliasvault.git

Builds:
  - versionName: __VERSION_NAME__
    versionCode: __VERSION_CODE__
    commit: __COMMIT__
    subdir: apps/mobile-app/android/app/
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - apt-get update
      - apt-get install -y build-essential
      - curl -Lo node.tar.gz https://nodejs.org/download/release/v20.19.3/node-v20.19.3-linux-x64.tar.gz
      - echo "76272878069683c3a36b933d2f4842436a26b527daa930ae9346b477011ee2f3 node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
    init:
      - cd ../..
      - sed -i -e '/signingConfig /d' android/app/build.gradle
      - npm install --production --build-from-source
    gradle:
      - yes
    srclibs:
      - rustup@1.27.1
    scanignore:
      - apps/mobile-app/android/build.gradle
      - apps/mobile-app/node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - apps/mobile-app/node_modules/expo-modules-autolinking/scripts/android/autolinking_implementation.gradle
      - apps/mobile-app/node_modules/expo-modules-core/android/ExpoModulesCorePlugin.gradle
      - apps/mobile-app/node_modules/react-native-reanimated/android/build.gradle
      - apps/mobile-app/node_modules/@react-native-async-storage/async-storage/android/build.gradle
      - apps/mobile-app/node_modules/react-native-safe-area-context/android/build.gradle
      - apps/mobile-app/node_modules/react-native-screens/android/build.gradle
      - apps/mobile-app/node_modules/react-native-edge-to-edge/android/build.gradle
      - apps/mobile-app/node_modules/react-native-webview/android/build.gradle
      - apps/mobile-app/node_modules/react-native-aes-gcm-crypto/android/build.gradle
      - apps/mobile-app/node_modules/react-native-context-menu-view/android/build.gradle
      - apps/mobile-app/node_modules/react-native-get-random-values/android/build.gradle
      - apps/mobile-app/node_modules/react-native-svg/android/build.gradle
    scandelete:
      - apps/mobile-app/node_modules/
    build:
      - cd ../..
      - $$rustup$$/rustup-init.sh -y --default-toolchain stable -t aarch64-linux-android
        armv7-linux-androideabi x86_64-linux-android
      - source $HOME/.cargo/env
      - export ANDROID_NDK_HOME=${ANDROID_NDK}
      - cd ../../core
      - chmod +x build-and-distribute.sh
      - ./build-and-distribute.sh --android
    ndk: 28.0.12433566

AutoUpdateMode: None
UpdateCheckMode: None
